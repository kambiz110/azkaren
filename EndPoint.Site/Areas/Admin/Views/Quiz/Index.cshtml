@using Azmoon.Application.Service.Quiz.Dto
@model GetQuizWithPeger
@using EndPoint.Site.Useful.Ultimite
@addTagHelper *, LazZiya.TagHelpers
@{
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}
@section Styles{


}
<h1>لیست آزمون ها</h1>

<p>
    <a asp-action="Create" class="btn btn-success">ایجاد آزمون</a>
</p>
<div class="row">
    <div class="col-sm-4 col-xs-6">
        <form asp-action="Index" method="get">
            <div class="input-group">
                <input type="text" name="q" class="form-control float-right" placeholder="جستجو">

                <div class="input-group-append">
                    <span class="input-group-text"><i class="fa fa-search"></i></span>
                </div>
                <button type="submit" class="btn btn-primary">جستجو</button>
            </div>
        </form>
    </div>

    <div class="col-sm-4 col-xs-6">
        <div class="form-group form-group-sm">


            <form class="form-inline d-inline" asp-action="Index" method="post">
                <button type="submit" name="search" value="clear" class="btn btn-default d-inline">
                    پاک کن
                </button>
            </form>

        </div>
    </div>
</div>
@{

    if (Model != null)
    {
        <table class="table">
            <thead>
                <tr>
                    <th>
                        @Html.DisplayNameFor(model => model.Quizes.ElementAt(1).Name)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Quizes.ElementAt(1).StartDate)

                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Quizes.ElementAt(1).EndDate)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Quizes.ElementAt(1).Status)
                    </th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @{
                    if (Model.Quizes != null)
                    {

                        @foreach (var item in Model.Quizes)
                        {
                            <tr>

                                <td>
                                    @Html.DisplayFor(modelItem => item.Name)
                                </td>
                                <td>
                                    @item.StartDate.ToPersianDateStrFarsi()
                                </td>
                                <td>
                                    @item.EndDate.ToPersianDateStrFarsi()
                                </td>
                                <td>

                                    @{

                                        switch (item.state)
                                        {
                                            case 1:

                                                <i class='fas fa-circle' style='font-size:25px;color:green'></i>
                                                break;
                                            case 2:
                                                <i class='fas fa-circle blink' style='font-size:25px;color:orange'></i>
                                                break;
                                            case 3:
                                                <i class='fas fa-circle' style='font-size:25px;color:red'></i>
                                                break;
                                        }
                                    }
                                </td>
                                <td>
                                    @Html.ActionLink("نتیجه", "Result", new { PageSize = 100, PageNo = 1, q = "", status = true, guizId = item.Id }, new { @class = "btn btn-outline-info" })
                                    @Html.ActionLink("ویرایش", "Edit", new { id = item.Id }, new { @class = "btn btn-outline-primary" })
                                    @Html.ActionLink("جزئیات", "Details", new { id = item.Id, PageSize = 10, PageNo = 1 }, new { @class = "btn btn-outline-info" })
                                    @Html.ActionLink("حذف", "Delete", new { id = item.Id }, new { @class = "btn btn-outline-danger" })
                                </td>
                            </tr>
                        }
                    }

                }

            </tbody>
        </table>
        <div class="card-footer">
            @{
                if (Model != null && Model.PagerDto != null)
                {
                    <paging page-no="@Model.PagerDto.PageNo"
                            page-size="@Model.PagerDto.PageSize"
                            total-records="@Model.PagerDto.TotalRecords"
                            show-prev-next="true"
                            show-total-pages="true"
                            show-total-records="true"
                            show-page-size-nav="true"
                            show-first-numbered-page="true"
                            show-last-numbered-page="true"
                            query-string-key-page-no="PageNo"
                            query-string-key-page-size="PageSize"
                            query-string-value="@@(Request.QueryString.Value)"
                            text-total-pages="صفحه"
                            text-total-records="رکورد"
                            text-first="&laquo;"
                            text-last="&raquo;"
                            text-previous="&lsaquo;"
                            text-next="&rsaquo;"
                            sr-text-first="اولین"
                            sr-text-last="آخرین"
                            sr-text-previous="قبلی"
                            sr-text-next="بعدی"
                            gap-size="2">
                    </paging>
                }
            }

        </div>
    }
}

@section Scripts{

    <script src="~/lib/modal-popup-ybox/js/directive.js"></script>
    <script src="~/lib/modal-popup-ybox/js/yBox.js"></script>
    <script>

        $(".blinking").setInterval(function () {
            $(".blinking").fadeOut(100).fadeIn(100)
        }, 1000);
    </script>
}